(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{1984:function(e,t,n){"use strict";n(60),n(49),n(71),n(338),n(136),n(268),n(69),n(120),n(21),n(13),n(23),n(24),n(176),n(15),n(40),n(11),n(34),n(36),n(70),n(43);var r=n(1985),a=n.n(r),i=(n(347),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||u(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return e}(e)||u(e)||c(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(e){e.children.forEach((function(e){"image"===e.type&&function(e){var t=e.attrGet("src");if(t){var n=new URL(t).searchParams.get("cw_image_height");n&&e.attrSet("style","height: ".concat(n,";"))}}(e)}))},h=n(1882)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(e){e.renderer.rules.mention=function(e,t){return'<span class="prosemirror-mention-node">'.concat(e[t].content,"</span>")},e.inline.ruler.before("link","mention",(function(e,t){var n,r,a,s,o,c,l="",u=e.posMax;return 91===e.src.charCodeAt(e.pos)&&(a=e.pos+1,!((r=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)&&(n=e.src.slice(a,r),(s=r+1)<u&&40===e.src.charCodeAt(s)&&(s+=1,(o=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok&&(l=e.md.normalizeLink(o.str),e.md.validateLink(l)?s=o.pos:l=""),s+=1),!!l.match(new RegExp(i))&&(t||(e.pos=a,e.posMax=r,(c=e.push("mention","")).href=l,c.content=n),e.pos=s,e.posMax=u,!0)))}))})).use((function(e){e.core.ruler.after("inline","add-image-height",(function(e){e.tokens.forEach((function(e){"inline"===e.type&&d(e)}))}))})).use(a.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),m=/(^|[^@\w])@(\w{1,15})\b/g,b=/(^|\s)#(\w+)/g,g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];p(this,e),this.message=t||"",this.isAPrivateNote=r,this.isATweet=n,this.isATemplate=i,this.hasSenderName=a}var t,n,r;return t=e,(n=[{key:"formatMessage",value:function(){var e=this.message;return this.isATweet&&!this.isAPrivateNote&&(e=(e=e.replace(m,"$1[@$2](http://twitter.com/$2)")).replace(b,"$1[#$2](https://twitter.com/hashtag/$2)")),this.isATemplate&&(e=this.formatTemplate(e)),this.hasSenderName&&(e=this.formatTelegramGroupSender(e)),h.render(e)}},{key:"formatTemplate",value:function(e){return e.replace(/\*([^*]+)\*/g,"**$1**").replace(/_([^_]+)_/g,"*$1*").replace(/~([^~]+)~/g,"~~$1~~")}},{key:"formatTelegramGroupSender",value:function(e){var t=o(e.split(":")),n=t[0],r=t.slice(1);return[n="**".concat(n,"**")].concat(s(r)).join(":")}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&f(t.prototype,n),r&&f(t,r),e}(),v=g;t.a={methods:{formatMessage:function(e,t,n,r,a){return new v(e,t,n,r,a).formattedMessage},getPlainText:function(e,t){return new v(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<100?e:"".concat(e.slice(0,97),"...")},highlightContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.getPlainText(e),a=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return r.replace(new RegExp("(".concat(a,")"),"ig"),'<span class="'.concat(n,'">$1</span>'))},shortenLongWords:function(e,t){return e&&"string"===typeof e?e.split(" ").map((function(e){return e.length>t?e.slice(0,t)+"...":e})).join(" "):""}}}},1985:function(e,t,n){"use strict";function r(e,t){t=t?Array.isArray(t)?t:[t]:[],Object.freeze(t);var n=e.renderer.rules.link_open||this.defaultRender;e.renderer.rules.link_open=function(e,r,a,i,s){var o=function(e,t){var n,r,a=e.attrs[e.attrIndex("href")][1];for(n=0;n<t.length;++n){if("function"!==typeof(r=t[n]).matcher)return r;if(r.matcher(a,r))return r}}(e[r],t),c=o&&o.attrs;return c&&function(e,t,n){Object.keys(n).forEach((function(r){var a,i=n[r];"className"===r&&(r="class"),(a=t[e].attrIndex(r))<0?t[e].attrPush([r,i]):t[e].attrs[a][1]=i}))}(r,e,c),n(e,r,a,i,s)}}r.defaultRender=function(e,t,n,r,a){return a.renderToken(e,t,n)},e.exports=r},1993:function(e,t,n){var r=n(29),a=n(271);e.exports=function(e){return r((function(){return!!a[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||a[e].name!==e}))}},207:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},2243:function(e,t,n){var r=n(65),a=/"/g;e.exports=function(e,t,n,i){var s=String(r(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),o+">"+s+"</"+t+">"}},2244:function(e,t,n){var r=n(29);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},2245:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/channels/facebook_login-7692d6c379288885d619b1e80bb214a4.png"},2715:function(e,t,n){"use strict";n(338),n(49),n(136),n(60);t.a={methods:{getRegexp:function(e){var t=e.lastIndexOf("/");return new RegExp(e.slice(1,t),e.slice(t+1))}}}},2779:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},2836:function(e,t,n){},2920:function(e,t,n){"use strict";n(13),n(136),n(60);var r={components:{Thumbnail:n(300).a},filters:{capitalize:function(e){return e?(e=e.toString()).charAt(0).toUpperCase()+e.slice(1):""}},props:{socialNetworks:{type:Array,required:!0,default:function(){return[]}}},methods:{imageSrc:function(e){return n(2932)("./".concat(e,".png"))},getUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"mailto: ".concat(e):e}}},a=r,i=(n(2940),n(10)),s=Object(i.a)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container row"},e._l(e.socialNetworks,(function(n){return t("a",{key:n.network,staticClass:"container__item",attrs:{href:e.getUrl(n.link,"email"===n.network),target:"_blank"}},[t("thumbnail",{attrs:{src:e.imageSrc(n.network),size:"42px"}}),e._v(" "),t("div",{staticClass:"container__item-network"},[e._v("\n      "+e._s(e._f("capitalize")(n.network))+"\n    ")])],1)})),0)}),[],!1,null,"3f54e975",null);t.a=s.exports},2931:function(e,t,n){"use strict";var r=n(31),a=n(2243);r({target:"String",proto:!0,forced:n(2244)("link")},{link:function(e){return a(this,"a","href",e)}})},2932:function(e,t,n){var r={"./Mask.png":2933,"./bottom-nav.png":2934,"./channels/facebook_login.png":2245,"./chatwoot_bot.png":2779,"./email.png":2935,"./facebook.png":2936,"./instagram.png":2937,"./no_page_image.png":2938,"./whatsapp.png":2939};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=2932},2933:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/Mask-721a0a2861577686bbdbee91e100b01a.png"},2934:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/bottom-nav-42469626e56f857375815ce3bbf56d30.png"},2935:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/email-622df1b413b68468ea92485ae8371b95.png"},2936:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/facebook-70e500438d9ab24ff8cd5a5d18b38ceb.png"},2937:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/instagram-a8961dbea41d2b95639d4dc8d6138686.png"},2938:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/no_page_image-416118fc189feff0a0012077801d0da0.png"},2939:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/whatsapp-3efecbda2ef08e26cf55df759121b5c2.png"},2940:function(e,t,n){"use strict";n(2836)},3206:function(e,t,n){},3207:function(e,t,n){},3575:function(e,t,n){"use strict";n(3206)},3576:function(e,t,n){"use strict";n(3207)},3673:function(e,t,n){"use strict";n.r(t);n(35),n(76),n(84),n(40),n(16),n(11),n(14),n(17),n(15),n(18),n(13),n(27),n(58);var r=n(33),a=n(239),i=n(2139),s=(n(69),n(60),n(43),{name:"GroupedAvatars",components:{Thumbnail:n(300).a},props:{users:{type:Array,default:function(){return[]}}}}),o=n(10),c={name:"AvailableAgents",components:{GroupedAvatars:Object(o.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex"},e._l(e.users,(function(e,n){return t("span",{key:e.id,class:(n?"-ml-4":"")+" inline-block rounded-full text-white shadow-solid"},[t("thumbnail",{attrs:{size:"36px",username:e.name,src:e.avatar,"has-border":""}})],1)})),0)}),[],!1,null,null,null).exports},props:{agents:{type:Array,default:function(){return[]}}},computed:{users:function(){return this.agents.slice(0,4).map((function(e){return{id:e.id,avatar:e.avatar_url,name:e.name}}))}}},l=Object(o.a)(c,(function(){return(0,this._self._c)("grouped-avatars",{attrs:{users:this.users}})}),[],!1,null,null,null).exports,u=n(411),p=n(174),f=n(377),d=n(1876),h=n(308),m=n(88),b=n(365);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C={name:"TeamAvailability",components:{AvailableAgents:l,FluentIcon:h.a,Spinner:p.a,CustomButton:u.a},mixins:[f.a,i.a,d.a],props:{availableAgents:{type:Array,default:function(){}},hasConversation:{type:Boolean,default:!1},unreadCount:{type:Number,default:0}},computed:v(v({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isCreating:"conversation/getIsCreating"})),{},{textColor:function(){return Object(a.e)(this.widgetColor)},isOnline:function(){var e=this.channelConfig.workingHoursEnabled,t=this.availableAgents.length>0;return e?this.isInBetweenTheWorkingHours:t}}),methods:{startConversation:function(){this.$emit("start-conversation"),this.hasConversation||m.a.sendMessage({event:"onEvent",eventIdentifier:b.c,data:{hasConversation:!1}})}}},w=Object(o.a)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 shadow-sm rounded-md bg-white dark:bg-slate-700"},[t("div",{staticClass:"flex items-center justify-between"},[t("div",{staticClass:""},[t("div",{staticClass:"text-sm font-medium text-slate-700 dark:text-slate-50"},[e._v("\n        "+e._s(e.isOnline?e.$t("TEAM_AVAILABILITY.ONLINE"):e.$t("TEAM_AVAILABILITY.OFFLINE"))+"\n      ")]),e._v(" "),t("div",{staticClass:"text-xs mt-1 text-slate-500 dark:text-slate-100"},[e._v("\n        "+e._s(e.replyWaitMessage)+"\n      ")])]),e._v(" "),e.isOnline?t("available-agents",{attrs:{agents:e.availableAgents}}):e._e()],1),e._v(" "),t("custom-button",{staticClass:"mt-2 outline-none",attrs:{id:"conversation-button",block:"","bg-color":e.widgetColor,disabled:e.isCreating},on:{click:e.startConversation}},[e.isCreating?t("spinner",{staticClass:"p-0"}):e._e(),e._v(" "),t("span",{staticClass:"pr-2 text-base"},[e._v("\n      "+e._s(e.hasConversation?e.$t("CONTINUE_CONVERSATION"):e.$t("START_CONVERSATION"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports,O=(n(2931),{components:{FluentIcon:h.a},props:{link:{type:String,default:""},title:{type:String,default:""}},data:function(){return{}},methods:{onClick:function(){this.$emit("click",this.link)}}}),_={components:{ArticleListItem:Object(o.a)(O,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"py-1 flex items-center justify-between -mx-1 px-1 hover:bg-slate-25 dark:hover:bg-slate-600 rounded cursor-pointer text-slate-700 dark:text-slate-50 dark:hover:text-slate-25 hover:text-slate-900",attrs:{role:"button"},on:{click:e.onClick}},[t("button",{staticClass:"underline-offset-2 text-sm leading-6 text-left"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),t("span",{staticClass:"pl-1 arrow"},[t("fluent-icon",{attrs:{icon:"arrow-right",size:"14"}})],1)])}),[],!1,null,null,null).exports},props:{articles:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{onClick:function(e){this.$emit("click",e)}}},k=Object(o.a)(_,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"py-2",attrs:{role:"list"}},e._l(e.articles,(function(n){return t("article-list-item",{key:n.slug,attrs:{link:n.link,title:n.title},on:{click:e.onClick}})})),1)}),[],!1,null,null,null).exports;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={components:{FluentIcon:h.a,ArticleList:k},props:{title:{type:String,default:""},articles:{type:Array,default:function(){return[]}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),methods:{onArticleClick:function(e){this.$emit("view",e)}}},P=j,E=(n(3575),{components:{CategoryCard:Object(o.a)(P,(function(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"text-sm font-medium text-slate-800 dark:text-slate-50 mb-0"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),t("article-list",{attrs:{articles:e.articles},on:{click:e.onArticleClick}}),e._v(" "),t("button",{staticClass:"inline-flex text-sm font-medium rounded-md px-2 py-1 -ml-2 leading-6 text-slate-800 dark:text-slate-50 justify-between items-center hover:bg-slate-25 dark:hover:bg-slate-800 see-articles",style:{color:e.widgetColor},on:{click:function(t){return e.$emit("view-all")}}},[t("span",{staticClass:"pr-2 text-sm"},[e._v(e._s(e.$t("PORTAL.VIEW_ALL_ARTICLES")))]),e._v(" "),t("fluent-icon",{attrs:{icon:"arrow-right",size:"14"}})],1)],1)}),[],!1,null,"109d0cc8",null).exports},props:{articles:{type:Array,default:function(){return[]}},categoryPath:{type:String,default:""}},methods:{onArticleClick:function(e){this.$emit("view",e)}}}),S=Object(o.a)(E,(function(){var e=this;return(0,e._self._c)("category-card",{attrs:{title:e.$t("PORTAL.POPULAR_ARTICLES"),articles:e.articles.slice(0,6)},on:{"view-all":function(t){return e.$emit("view-all")},view:e.onArticleClick}})}),[],!1,null,null,null).exports,R=Object(o.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"py-4 space-y-4 bg-white dark:bg-slate-700"},[t("div",{staticClass:"space-y-2 animate-pulse"},[t("div",{staticClass:"h-6 bg-slate-100 dark:bg-slate-500 rounded w-2/5"})]),e._v(" "),t("div",{staticClass:"space-y-2 animate-pulse"},[t("div",{staticClass:"h-4 bg-slate-100 dark:bg-slate-500 rounded"}),e._v(" "),t("div",{staticClass:"h-4 bg-slate-100 dark:bg-slate-500 rounded"}),e._v(" "),t("div",{staticClass:"h-4 bg-slate-100 dark:bg-slate-500 rounded"})]),e._v(" "),t("div",{staticClass:"space-y-2 animate-pulse"},[t("div",{staticClass:"h-4 bg-slate-100 dark:bg-slate-500 rounded w-1/5"})])])}],!1,null,null,null).exports,I=n(2920),N=(n(115),n(21),n(24),n(49),n(71),n(278),n(1984)),F=n(1864),T=n(340),$=n(2715);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V={components:{SocialNetworks:I.a,CustomButton:u.a,Spinner:p.a},mixins:[F.a,T.a,N.a,f.a,$.a],props:{options:{type:Object,default:function(){}}},data:function(){return{locale:this.$root.$i18n.locale,hasErrorInPhoneInput:!1,message:"",formValues:{},labels:{emailAddress:"EMAIL_ADDRESS",fullName:"FULL_NAME",phoneNumber:"PHONE_NUMBER"}}},computed:L(L({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isCreating:"conversation/getIsCreating",activeCampaign:"campaign/getActiveCampaign",currentUser:"contacts/getCurrentUser"})),{},{textColor:function(){return Object(a.e)(this.widgetColor)},hasActiveCampaign:function(){return!Object(m.e)(this.activeCampaign)},shouldShowHeaderMessage:function(){return this.hasActiveCampaign||this.preChatFormEnabled},headerMessage:function(){return this.preChatFormEnabled?this.options.preChatMessage:this.hasActiveCampaign?this.$t("PRE_CHAT_FORM.CAMPAIGN_HEADER"):""},preChatFields:function(){return this.preChatFormEnabled?this.options.preChatFields:[]},filteredPreChatFields:function(){var e=this.currentUser.has_email,t=this.currentUser.has_phone_number,n=!!(!!this.currentUser.identifier||e||t);return this.preChatFields.filter((function(r){return(!e||"emailAddress"!==r.name)&&((!t||"phoneNumber"!==r.name)&&(!n||"fullName"!==r.name))}))},enabledPreChatFields:function(){var e=this;return this.filteredPreChatFields.filter((function(e){return e.enabled})).map((function(t){return L(L({},t),{},{type:"phoneNumber"===t.name?"phoneInput":e.findFieldType(t.type)})}))},conversationCustomAttributes:function(){var e=this,t={};return this.enabledPreChatFields.forEach((function(n){"conversation_attribute"===n.field_type&&(t=L(L({},t),{},D({},n.name,e.getValue(n))))})),t},contactCustomAttributes:function(){var e=this,t={};return this.enabledPreChatFields.forEach((function(n){"contact_attribute"===n.field_type&&(t=L(L({},t),{},D({},n.name,e.getValue(n))))})),t},inputStyles:function(){return"mt-1 border rounded w-full py-2 px-3 text-slate-700 outline-none"},isInputDarkOrLightMode:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600")," ").concat(this.$dm("text-slate-700","dark:text-slate-50"))},inputBorderColor:function(){return"".concat(this.$dm("border-black-200","dark:border-black-500"))}}),methods:{labelClass:function(e){var t=e.hasErrors;return"text-xs font-medium ".concat(t?this.$dm("text-red-400","dark:text-red-400"):this.$dm("text-black-800","dark:text-slate-50"))},inputClass:function(e){var t=e.hasErrors,n=e.classification,r=e.type;return"box"===n&&"checkbox"===r?"":("phoneInput"===r&&(this.hasErrorInPhoneInput=t),t?"".concat(this.inputStyles," border-red-200 hover:border-red-300 focus:border-red-300 ").concat(this.isInputDarkOrLightMode):"".concat(this.inputStyles," hover:border-black-300 focus:border-black-300 ").concat(this.isInputDarkOrLightMode," ").concat(this.inputBorderColor))},isContactFieldRequired:function(e){return this.preChatFields.find((function(t){return t.name===e})).required},getLabel:function(e){return e.label},getPlaceHolder:function(e){return e.placeholder},getValue:function(e){var t=e.name;return"select"===e.type?this.enabledPreChatFields.find((function(e){return e.name===t})).values[this.formValues[t]]:this.formValues[t]||null},getValidation:function(e){var t=e.type,n=e.name,r=e.field_type,a=e.regex_pattern,i=a?this.getRegexp(a):null,s={emailAddress:"email",phoneNumber:"isValidPhoneNumber",url:"url",date:"date",text:null,select:null,number:null,checkbox:!1,contact_attribute:i?[["matches",i]]:null,conversation_attribute:i?[["matches",i]]:null},o=Object.keys(s),c=this.isContactFieldRequired(n)?["bail","required"]:["bail","optional"];if(o.includes(n)||o.includes(t)||o.includes(r)){var l=s[t]||s[n]||s[r];return l?c.concat(l):c}return[]},findFieldType:function(e){return"link"===e?"url":"list"===e?"select":e},getOptions:function(e){if("select"===e.type){var t={};return e.values.forEach((function(e,n){t=L(L({},t),{},D({},n,e))})),t}return null},onSubmit:function(){var e=this.formValues,t=e.emailAddress,n=e.fullName,r=e.phoneNumber,a=(e.message,this.currentUser.email),i=this.formatToE164(r);this.$emit("submit",{fullName:n,phoneNumber:i,emailAddress:t||a,message:this.$t("START_CONVERSATION"),activeCampaignId:this.activeCampaign.id,conversationCustomAttributes:this.conversationCustomAttributes,contactCustomAttributes:this.contactCustomAttributes})},formatToE164:function(e){if(!e)return"";var t=e.replace(/-/g,"");return t.startsWith("0")?"+972".concat(t.slice(1)):t}}},U=(n(3576),Object(o.a)(V,(function(){var e=this,t=e._self._c;return t("FormulateForm",{staticClass:"flex flex-1 flex-col p-6 overflow-y-auto pre-chat-form",on:{submit:e.onSubmit},model:{value:e.formValues,callback:function(t){e.formValues=t},expression:"formValues"}},[e.shouldShowHeaderMessage?t("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.headerMessage,!1),expression:"formatMessage(headerMessage, false)"}],staticClass:"mb-4 text-sm leading-5 pre-chat-header-message",class:e.$dm("text-black-800","dark:text-slate-50")}):e._e(),e._v(" "),e._l(e.enabledPreChatFields,(function(n){return t("FormulateInput",{key:n.name,attrs:{name:n.name,type:n.type,label:e.getLabel(n),placeholder:e.getPlaceHolder(n),validation:e.getValidation(n),options:e.getOptions(n),"label-class":t=>e.labelClass(t),"input-class":t=>e.inputClass(t),"validation-messages":{startsWithPlus:e.$t("PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR"),isValidPhoneNumber:e.$t("PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR"),email:e.$t("PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR"),required:e.$t("PRE_CHAT_FORM.REQUIRED"),matches:n.regex_cue?n.regex_cue:e.$t("PRE_CHAT_FORM.REGEX_ERROR")},"has-error-in-phone-input":e.hasErrorInPhoneInput,"default-country":e.defaultCountryCode}})})),e._v(" "),t("custom-button",{staticClass:"mt-2 mb-5 font-medium outline-none",attrs:{id:"conversation-button",block:"","bg-color":e.widgetColor,"text-color":e.textColor,disabled:e.isCreating}},[e.isCreating?t("spinner",{staticClass:"p-0"}):e._e(),e._v("\n    "+e._s(e.$t("START_CONVERSATION"))+"\n  ")],1),e._v(" "),e.inboxSocialNetworks.length?t("social-networks",{attrs:{"social-networks":e.inboxSocialNetworks}}):e._e()],2)}),[],!1,null,"345319c6",null).exports),H=n(345);function z(e,t,n,r,a,i,s){try{var o=e[i](s),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(r,a)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W={components:{PreChatForm:U},mixins:[f.a,F.a],computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({conversationSize:"conversation/getConversationSize"})),mounted:function(){var e=this;this.$emitter.on(H.c,(function(){e.replaceRoute("messages")}))},methods:{onSubmit:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r,a,i,s,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.fullName,a=e.emailAddress,i=e.message,s=e.activeCampaignId,o=e.phoneNumber,c=e.contactCustomAttributes,l=e.conversationCustomAttributes,!s){t.next=6;break}n.$emitter.emit("execute-campaign",{campaignId:s,customAttributes:l}),n.$store.dispatch("contacts/update",{user:{email:a,name:r,phone_number:o}}),t.next=9;break;case 6:return t.next=8,n.$store.dispatch("conversation/createConversation",{fullName:r,emailAddress:a,message:i,phoneNumber:o,customAttributes:l});case 8:n.replaceRoute("messages");case 9:Object(m.e)(c)||n.$store.dispatch("contacts/setCustomAttributes",c);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(e){z(i,r,a,s,o,"next",e)}function o(e){z(i,r,a,s,o,"throw",e)}s(void 0)}))})()}}},q=W,J=Object(o.a)(q,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-1 overflow-auto"},[t("pre-chat-form",{attrs:{options:e.preChatFormOptions},on:{submit:e.onSubmit}})],1)}),[],!1,null,null,null).exports;function Y(e,t,n,r,a,i,s){try{var o=e[i](s),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(r,a)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z={name:"Home",components:{ArticleHero:S,TeamAvailability:w,ArticleCardSkeletonLoader:R,SocialNetworks:I.a,PreChatForm:J},mixins:[f.a,F.a,T.a],props:{hasFetched:{type:Boolean,default:!1},isCampaignViewClicked:{type:Boolean,default:!1}},computed:X(X({},Object(r.mapGetters)({availableAgents:"agent/availableAgents",activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize",unreadMessageCount:"conversation/getUnreadMessageCount",popularArticles:"article/popularArticles",articleUiFlags:"article/uiFlags"})),{},{showPreChatForm:function(){return this.shouldShowPreChatForm&&!this.conversationSize},widgetLocale:function(){return this.$i18n.locale||"en"},portal:function(){return window.chatwootWebChannel.portal},showArticles:function(){return this.portal&&!this.articleUiFlags.isFetching&&this.popularArticles.length},defaultLocale:function(){var e=this.widgetLocale,t=this.portal.config,n=t.allowed_locales,r=t.default_locale;return n.includes(e)?e:r}}),watch:{conversationSize:function(e,t){e>t&&this.replaceRoute("messages")}},mounted:function(){var e;if(null===(e=document.getElementById("conversation-button"))||void 0===e||e.focus(),this.portal&&0===this.popularArticles.length){var t=this.defaultLocale;this.$store.dispatch("article/fetch",{slug:this.portal.slug,locale:t})}},methods:{startConversation:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.conversationSize){e.next=3;break}return e.next=3,t.$store.dispatch("conversation/createConversation",{message:t.$t("START_CONVERSATION")});case 3:return e.abrupt("return",t.replaceRoute("messages"));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){Y(i,r,a,s,o,"next",e)}function o(e){Y(i,r,a,s,o,"throw",e)}s(void 0)}))})()},openArticleInArticleViewer:function(e){var t="".concat(e,"?show_plain_layout=true&is_widget=true");this.prefersDarkMode&&(t="".concat(t,"&theme=dark")),this.$router.push({name:"article-viewer",params:{link:t}})},viewAllArticles:function(){var e=this.defaultLocale,t=window.chatwootWebChannel.portal.slug,n=Object(m.c)("hc/".concat(t,"/").concat(e),!0);this.openArticleInArticleViewer(n)}}},ee=Z,te=Object(o.a)(ee,(function(){var e=this,t=e._self._c;return e.showPreChatForm?t("pre-chat-form"):t("div",{staticClass:"z-50 rounded-md w-full flex flex-1 flex-col bg-slate-25",class:{"pb-2":e.showArticles,"justify-end":!e.showArticles}},[t("div",{staticClass:"px-4 pt-4 w-full"},[t("team-availability",{attrs:{"available-agents":e.availableAgents,"has-conversation":!!e.conversationSize,"unread-count":e.unreadMessageCount},on:{"start-conversation":e.startConversation}}),e._v(" "),e.inboxSocialNetworks.length?t("social-networks",{attrs:{"social-networks":e.inboxSocialNetworks}}):e._e()],1),e._v(" "),e.showArticles?t("div",{staticClass:"px-4 py-2 w-full"},[t("div",{staticClass:"p-4 rounded-md bg-white dark:bg-slate-700 shadow-sm w-full"},[e.articleUiFlags.isFetching||e.articleUiFlags.isError||!e.popularArticles.length?e._e():t("article-hero",{attrs:{articles:e.popularArticles},on:{view:e.openArticleInArticleViewer,"view-all":e.viewAllArticles}})],1)]):e._e(),e._v(" "),e.articleUiFlags.isFetching?t("div",{staticClass:"px-4 py-2 w-full"},[t("div",{staticClass:"p-4 rounded-md bg-white dark:bg-slate-700 shadow-sm w-full"},[t("article-card-skeleton-loader")],1)]):e._e()])}),[],!1,null,null,null);t.default=te.exports},395:function(e,t,n){"use strict";var r=n(31),a=n(248).trim;r({target:"String",proto:!0,forced:n(1993)("trim")},{trim:function(){return a(this)}})}}]);
//# sourceMappingURL=159-5c0f5a7c77b544a49af0.chunk.js.map